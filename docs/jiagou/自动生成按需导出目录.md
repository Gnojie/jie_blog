å‚è€ƒæ—¥æœŸjsåº“[date-fnsçš„github](https://github.com/date-fns/date-fns/blob/master/src/index.ts)
å¯¼å‡ºçš„å…¥å£æ–‡ä»¶æ˜¯ç”±è„šæœ¬ç”Ÿæˆçš„

å°è£…å·¥å…·åº“æˆ–æ˜¯ç»„ä»¶åº“æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¿½æ±‚æŒ‰éœ€å¯¼å‡ºæŒ‰éœ€å¯¼å…¥ï¼Œæ”¯æŒtree-shakingçš„esmæ¨¡å¼
å…³äºesmå¦‚ä½•æ”¯æŒtree-shakingï¼Œå¦å¤–è®²TODO:

ğŸ‘‡ å¯¼å‡ºçš„æ–‡ä»¶å†…å®¹éœ€è¦æ˜¯è¿™ç§è¯­å¥
```js
// This file is generated automatically by `scripts/build/indices.ts`. 
export { default as add } from './add/index'
export { default as addBusinessDays } from './addBusinessDays/index'
export { default as addDays } from './addDays/index'
// ...
```

## nodeä¸èƒ½ç›´æ¥è¿è¡Œtsï¼Œå¦‚ä½•åœ¨nodeç¯å¢ƒä½¿ç”¨tsï¼Ÿ

è®©nodeç›´æ¥è¿è¡Œts
```ts
#!/usr/bin/env yarn ts-node

/**
 * @file
 * The script generates index files for submodules.
 */

import { writeFile } from 'fs/promises' //  TODO: nodeå†…ç½®æ¨¡å—promisesï¼Ÿ
import getFileList from '../_lib/getFileList'

interface File {
  name: string
  path: string
  fullPath: string
}

// ä¼ å…¥ç›®å½•ä¿¡æ¯ç”Ÿæˆæ–‡ä»¶å†…å®¹
function generateIndex(
  files: File[],
): string {
  // æ ¹æ®ç›®å½•ä¿¡æ¯å†™å…¥jsè¯­å¥
  const lines = files.map(
    (file) => `export { default as ${file.name} } from '${file.path}/index'`
  )

  // æ·»åŠ æ³¨é‡Šå’Œæ¢è¡Œ
  return `// This file is generated automatically by \`scripts/build/indices.ts\`.

${lines.join('\n')}
`
}

// ç«‹å³æ‰§è¡Œå‡½æ•°
;(async () => {
  // ç”Ÿæˆç›®å½•ä¿¡æ¯
  const fileList = await getFileList()

  writeFile('src/index.ts', generateIndex(fileList))
})()
```

ğŸ‘‡ æ ¹æ®srcæ–‡ä»¶å¤¹ç”Ÿæˆç›®å½•ä¿¡æ¯
```js
// lib/getFileList
const path = require('path')
const fs = require('fs')
const { promisify } = require('util') // promisifyæŠŠnodeå†…ç½®æ¨¡å—æ–¹æ³•è½¬ä¸ºpromise...ç”¨nodeåŒæ­¥æ–¹æ³•ä¸å°±è¡Œäº†å—..

const exists = promisify(fs.exists)
const readDir = promisify(fs.readdir)

const ignorePattern = /^_|\./ // can't start with `_` or have a `.` in it
const ignoredDirs = ['locale', 'esm', 'fp', 'constants']

async function getFileList() {
  const srcPath = path.join(process.cwd(), 'src')
  const files = await readDir(srcPath)

  // æ ¹æ®ç›®å½•ç”Ÿæˆè·¯å¾„ä¿¡æ¯
  return Promise.all(
    files
      .filter(
        // è¿‡æ»¤å¿½ç•¥ç›®å½•
        (file) => !ignorePattern.test(file) && !ignoredDirs.includes(file)
      )
      .map(async (file) => {
        // å­˜åœ¨tså°±ä½¿ç”¨tsï¼Œå¦åˆ™è¾“å…¥jsçš„ç›®å½•
        const isTs = await exists(path.join(srcPath, file, 'index.ts'))

        return {
          name: file,
          path: `./${file}`,
          fullPath: `./src/${file}/index.${isTs ? 'ts' : 'js'}`,
        }
      })
  )
}

module.exports = getFileList
```

ç”Ÿæˆç»„ä»¶åº“ç›®å½•åŒç†å¦‚ğŸ‘‡ TODO: