[new - mdn](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new)

ä»å¾®è§‚çš„è§’åº¦çœ‹å¯¹è±¡çš„ç”Ÿæˆ
```js
// è¿™ä¸ªå­—é¢é‡å†…éƒ¨ä¹Ÿæ˜¯ä½¿ç”¨äº† new Object()
let a = { b: 1 }
```

```js
// function å°±æ˜¯ä¸ªè¯­æ³•ç³–
// å†…éƒ¨ç­‰åŒäº new Function()
function Foo() {}
```
å¯¹äºå¯¹è±¡æ¥è¯´ï¼Œå…¶å®éƒ½æ˜¯é€šè¿‡ `new` äº§ç”Ÿçš„
`function Foo() ==> new Function()`
`let a = { b : 1 } ==> new Object()` 

å½“ç„¶åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæ›´æ¨èä½¿ç”¨å­—é¢é‡çš„æ–¹å¼åˆ›å»ºå¯¹è±¡,æ€§èƒ½ä¸Š
ä½¿ç”¨ `new Object()` çš„æ–¹å¼åˆ›å»ºå¯¹è±¡éœ€è¦é€šè¿‡ä½œç”¨åŸŸé“¾ä¸€å±‚å±‚æ‰¾åˆ° `Object`ï¼Œä½†æ˜¯ä½¿ç”¨å­—é¢é‡çš„æ–¹å¼å°±æ²¡è¿™ä¸ªé—®é¢˜

ğŸ‘† æˆ‘ä»¬çŸ¥é“äº†é™¤äº†æˆ‘ä»¬è‡ªå·±å†™`ç±»æˆ–è€…æ„é€ å‡½æ•°`éœ€è¦ `new`ï¼Œå…¶å®å†…éƒ¨çš„å¾ˆå¤šä¸œè¥¿éƒ½æ˜¯åœ¨ `new`

## `new` ä¸€ä¸ªå‡½æ•°å‘ç”Ÿäº†ä»€ä¹ˆ
> è¾“å…¥å‡½æ•° è¾“å‡ºå¯¹è±¡

[new - mdn](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new) æ–‡æ¡£ä¸­æŒ‡å‡ºåœ¨è°ƒç”¨ `new` çš„è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿå››ä»¶äº‹æƒ…ï¼š
1. åˆ›å»ºä¸€ä¸ªç©ºçš„å¯¹è±¡ï¼ˆå³ `{}` ï¼‰
2. ä¸ºåˆ›å»ºçš„å¯¹è±¡æ·»åŠ å±æ€§ `__proto__` ï¼Œå°†è¯¥å±æ€§é“¾æ¥è‡³æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ 
3. å°†åˆ›å»ºçš„å¯¹è±¡ä½œä¸º `this` çš„ä¸Šä¸‹æ–‡ 
4. å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å›`this`

## å®ç°new
```js
function myNew(fn, ...arg) {
  let obj = {} // 1. åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡
  obj.__proto__ = fn.prototype // 2. è®¾ç½®ç©ºå¯¹è±¡çš„åŸå‹

  let res = fn.call(obj, ...arg) // 3. ç»‘å®šthiså¹¶æ‰§è¡Œæ„é€ å‡½æ•°
  return res instanceof Object ? res : obj // 4. æ„é€ å‡½æ•°ä¸è¿”å›å¯¹è±¡åˆ™è¿”å›åˆ›å»ºçš„æ–°å¯¹è±¡
}

function test(name) {
  this.name = name
  console.log('test')
}
myNew(test, 'name')
```
## æ„é€ å‡½æ•°
> æ„é€ å‡½æ•°ä¼šåœ¨`classç±»`æ—¶è¯¦ç»†åˆ†æ TODO: 
> 
> è¿™é‡Œè¿˜æ˜¯æä¸€ä¸‹ï¼Œæ„é€ å‡½æ•°ä¸»è¦å¸®åŠ©æˆ‘ä»¬æŠŠé‡å¤çš„é€»è¾‘é›†æˆèµ·æ¥ï¼Œä¹Ÿå°±æ˜¯è®¾è®¡æ¨¡å¼ä¸­çš„å·¥å‚æ¨¡å¼
> 
> é€šè¿‡åœ¨æ„é€ å‡½æ•°çš„åŸå‹é“¾ä¸Šå®šä¹‰å…¬ç”¨æ–¹æ³•ï¼Œå®ç°æ¯ä¸ªnewå‡ºæ¥çš„å¯¹è±¡çš„åŸå‹é“¾ä¸Šéƒ½æœ‰è¿™äº›å…¬ç”¨æ–¹æ³•

æˆ‘ä»¬å¸¸å¸¸çœ‹åˆ°æœ‰ä¸€äº›æ„é€ å‡½æ•°**åŒæ—¶**æ”¯æŒnewå’Œç›´æ¥è°ƒç”¨
```js
const obj1 = new Object()
const obj2 = Object()
```
ğŸ‘† è¦åŒæ—¶æ”¯æŒå¹¶ä¸”éƒ½èƒ½æ­£å¸¸ä½¿ç”¨æ˜¯éœ€è¦**æ„é€ å‡½æ•°å†…éƒ¨è‡ªå·±åŒºåˆ†å¤„ç†**çš„
```js
function Object() {
  if (!(this instanceof Object)) {
    // ç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°æ—¶
    return new Object();
  }
  // é€šè¿‡new è°ƒç”¨æ„é€ å‡½æ•°æ—¶
  // do somting
}
```
`this instanceof Object`ç”¨thisæ˜¯å¦æ˜¯å®ä¾‹è‡ªèº«åˆ¤æ–­æ˜¯ä¸æ˜¯åœ¨newçš„å†™æ³•åœ¨ [æ‰‹å†™bind](./æ‰‹å†™ç³»åˆ—-callbind.md#å®ç°bind) çš„æ—¶å€™æˆ‘ä»¬ç”¨è¿‡è¿™ç§å†™æ³•

---
æ€è€ƒğŸ¤”: [new Vue()å¹²äº†ä»€ä¹ˆ](../vue/é‡å­¦vue-01æ¨¡æ¿è¯­æ³•.md#Vueæ„é€ å‡½æ•°)

---
## ä»£ç åœ°å€
[codepen](https://codepen.io/collection/kNgywB)

## å‚è€ƒèµ„æ–™
- [new - mdn](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new)
- [é¢è¯•å®˜é—®ï¼šèƒ½å¦æ¨¡æ‹Ÿå®ç°JSçš„newæ“ä½œç¬¦](https://juejin.cn/post/6844903704663949325)