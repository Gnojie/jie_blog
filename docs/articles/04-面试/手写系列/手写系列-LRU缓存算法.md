## LRU(Least Recently Used)
> å±äºç®—æ³•èŒƒç•´ï¼Œä½†æ˜¯å› ä¸ºå®é™…åº”ç”¨ä¹Ÿå¸¸ä½¿ç”¨ï¼Œæ‰€ä»¥ä½œä¸ºæ‰‹å†™ç³»åˆ—

Least Recently Used
æœ€è¿‘æœ€å°‘ä½¿ç”¨

åˆ›å»ºæ—¶é—´ä¸Š: å…ˆè¿›å…ˆå‡º
å¦å¤–è¿˜æœ‰ä½¿ç”¨çš„æ—¶é—´(å½“ä½¿ç”¨ `get` è·å–æ•°æ®åï¼Œè¯¥æ¡æ•°æ®éœ€è¦æ›´æ–°åˆ°æœ€å‰é¢)

- æ“ä½œç³»ç»Ÿåº•å±‚çš„å†…å­˜ç®¡ç†ï¼Œå…¶ä¸­å°±åŒ…æ‹¬æœ‰ `LRU` ç®—æ³•
- ç¼“å­˜æœåŠ¡ï¼Œæ¯”å¦‚ `redis` ç­‰ç­‰
- æ¯”å¦‚æµè§ˆå™¨çš„æœ€è¿‘æµè§ˆè®°å½•å­˜å‚¨

2ä¸ªå®ç°æ–¹å‘
- `hashmap` çš„æ•°æ®ç»“æ„ï¼Œèƒ½å¤Ÿé«˜æ•ˆçš„æ£€ç´¢ä¸ä»»æ„é”®ç›¸å…³è”çš„å€¼
  - æ¯”å¦‚å­—ç¬¦ä¸²
  - ES6 çš„ `Map`
  - æˆ–è€…ä»»ä½•æ™®é€šçš„å¯¹è±¡ {}
  - ã€ç¼“å­˜ã€‘ä¸ä¸€ä¸ªã€å›ºå®šå®¹é‡çš„é”®å€¼å¯¹å­˜å‚¨ã€‘æ²¡ä»€ä¹ˆä¸åŒ
- å°†æ‰€æœ‰å…ƒç´ æŒ‰æœ€åè®¿é—®é¡ºåºå­˜å‚¨
  - æˆ‘ä»¬å°†éœ€è¦é«˜æ•ˆåœ°ç§»åŠ¨å…ƒç´ 
  - åŒå‘é“¾è¡¨

### hashMap -å­—å…¸

> [æ•°æ®ç»“æ„-å­—å…¸](../é¢˜åº“/é¢è¯•-æ•°æ®ç»“æ„.md#å­—å…¸)

- åˆ›å»º `LRUCache` ç±»ï¼Œç”¨æ¥å½“å­˜å‚¨ç©ºé—´
```js
class LRUCache {
  constructor(maxSize) {
    this.maxSize = maxSize; // å­˜å‚¨é•¿åº¦
    this.dataMap = new Map(); // å­˜å‚¨æ•°æ®
  }
  // å­˜å‚¨æ•°æ®ï¼Œé€šè¿‡é”®å€¼å¯¹çš„æ–¹å¼
  set(key, value) { }
  // è·å–æ•°æ®
  get(key) { }
}

const lruCache = new LRUCache(5);
```

- é‡‡ç”¨ `Map` æ•°æ®ç»“æ„å­˜å‚¨æ•°æ®ï¼Œå› ä¸ºå®ƒçš„å­˜å–æ—¶é—´å¤æ‚åº¦ä¸º `O(1)`ï¼Œæ•°ç»„ä¸º `O(n)`
- å®ç° `get` å’Œ `set` æ–¹æ³•ï¼Œç”¨æ¥è·å–å’Œæ·»åŠ æ•°æ®
- æˆ‘ä»¬çš„å­˜å‚¨ç©ºé—´æœ‰é•¿åº¦é™åˆ¶ï¼Œæ‰€ä»¥æ— éœ€æä¾›åˆ é™¤æ–¹æ³•ï¼Œå­˜å‚¨æ»¡ä¹‹åï¼Œè‡ªåŠ¨åˆ é™¤æœ€ä¹…è¿œçš„é‚£æ¡æ•°æ®
- å½“ä½¿ç”¨ `get` è·å–æ•°æ®åï¼Œè¯¥æ¡æ•°æ®éœ€è¦æ›´æ–°åˆ°æœ€å‰é¢

```js
// å­˜å‚¨æ•°æ®ï¼Œé€šè¿‡é”®å€¼å¯¹çš„æ–¹å¼
set(key, value) {
  const dataMap = this.dataMap;
  // å»é‡
  if (dataMap.has(key)) {
    dataMap.delete(key)
  }
  // å­˜å…¥æ•°æ®
  dataMap.set(key, value);

  // ğŸ”¥ å¦‚æœè¶…å‡ºäº†å®¹é‡ï¼Œåˆ™éœ€è¦åˆ é™¤æœ€ä¹…çš„æ•°æ®
  if (dataMap.size > this.maxSize) {
    this._removeFirstItem()
  }
}
// è·å–æ•°æ®
get(key) {
  const dataMap = this.dataMap;
  // æœªæ‰¾åˆ°
  if (!dataMap.has(key)) {
    return null;
  }
  const value = dataMap.get(key); // è·å–å…ƒç´ 

  // ğŸ”¥ æ›´æ–°åˆ°æœ€å‰é¢
  dataMap.delete(key); // åˆ é™¤å…ƒç´ 
  dataMap.set(key, value); // é‡æ–°æ’å…¥å…ƒç´ 
}

// ç§»é™¤æœ€æ—©çš„æ•°æ®
_removeFirstItem() {
  const delKey = this.dataMap.keys().next().value;
  this.dataMap.delete(delKey);
}
```

### åŒå‘é“¾è¡¨


## å‚è€ƒèµ„æ–™

- [é¢è¯•å®˜ï¼šè¯·ä½¿ç”¨JSå®Œæˆä¸€ä¸ªLRUç¼“å­˜ï¼Ÿ](https://juejin.cn/post/7105654083347808263#heading-5)
- [[è¯‘]ä½¿ç”¨ JavaScript å®ç°ä¸€ä¸ªé«˜æ•ˆçš„ LRU cache - åŒå‘é“¾è¡¨](https://juejin.cn/post/6844904183426973710)




