# é«˜é˜¶å‡½æ•°

[é«˜é˜¶å‡½æ•°](../../01-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/js/%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0.md)

## å‡½æ•°æŸ¯é‡ŒåŒ–(é—­åŒ…æš‚å­˜æ€è·¯)
> ä¸€ä¸ªå‡½æ•°å¤šæ¬¡è°ƒç”¨ä¼ å…¥ä¸åŒçš„å‚æ•°ï¼Œç»Ÿä¸€æ‰€æœ‰å‚æ•°è®¡ç®—å‡ºç»“æžœ
>
> æœ¬è´¨ä¸ŠåŽŸç†å°±æ˜¯ç¼“å­˜ä½å‡½æ•°çš„å‚æ•°

- åˆ©ç”¨å‡½æ•°è¿”å›žå‡½æ•°ï¼Œæ¥æ‹¼æŽ¥æš‚å­˜ä½å‚æ•°é›†åˆ
- åŠ ä¸Šå‚æ•°æ•°é‡çš„åˆ¤æ–­æ¡ä»¶å†³å®šæ˜¯æ‰§è¡Œç›®æ ‡å‡½æ•°ï¼Œè¿˜æ˜¯ç»§ç»­è¿”å›žåŒ…è£…çš„æœªæ‰§è¡Œå‡½æ•°

```js
// æŸ¯é‡ŒåŒ–å‡½æ•°
const curry = (fn) => {
  return function curriedFn (...args) {
    // æœªè¾¾åˆ°è§¦å‘æ¡ä»¶(ç›®æ ‡å‡½æ•°æ‰€éœ€è¦çš„å‚æ•°æ•°é‡)ï¼Œç»§ç»­æ”¶é›†å‚æ•°ï¼Œä¸æ‰§è¡Œç›®æ ‡å‡½æ•°
    if (fn.length > args.length) {
      return function () {
        // sliceæ–¹æ³•å†…éƒ¨çš„thiså°±ä¼šè¢«æ›¿æ¢æˆargumentsï¼Œå¹¶å¾ªçŽ¯éåŽ†argumentsï¼Œå¤åˆ¶åˆ°æ–°æ•°ç»„è¿”å›žï¼Œè¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªå¤åˆ¶argumentsç±»æ•°ç»„çš„æ•°ç»„å¯¹è±¡ã€‚
        return curriedFn(...args, ...arguments)
      }
    }
    return fn(...args)
  }
}

const multiply = (x, y, z) => x*y*z; // multiply.length -> 3

const curryMul = curry(multiply);
const result = curryMul(1)(2)(3); // 1*2*3 = 6
```
ðŸ‘† `å‡½æ•°.length === arguments.length` ç”¨äºŽåˆ¤æ–­ç´¯ç§¯çš„å‚æ•°æ•°é‡æ˜¯å¦æ»¡è¶³è¦æ±‚

## å‡½æ•°ç»„åˆ
ä¸€ç³»åˆ—é€»è¾‘å‡½æ•°ï¼Œåœ¨å¹³æ—¶çš„æ“ä½œæ˜¯ï¼Œè‡ªå·±å†™ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œæ¥è°ƒç”¨å¤šä¸ªå‡½æ•° ðŸ‘‡
```js
const fn1 = ()=>{}
const fn2 = ()=>{}
const fn3 = ()=>{}

const fn = (params) {
  const res1 = fn1(params)
  const res2 = fn2(res1)
  const res3 = fn3(res2)
  return res3
}
fn(params)
```
è¿™ä¸ªå¤„ç†å‡½æ•°åŒæ ·å¯ä»¥ä½œä¸ºå¤ç”¨å‡½æ•°ä½¿ç”¨


ç”¨å‡½æ•°ç»„åˆï¼Œåˆ™æ˜¯æŠ½ç¦»å¤„ç†å¤šä¸ªå‡½æ•°çš„é€»è¾‘ä¸ºä¸€ä¸ªçº¯å‡½æ•°ï¼Œä¸éœ€è¦è‡ªå·±å†™å¤„ç†å‡½æ•°

æŠŠå¤šä¸ªå‡½æ•°ï¼Œæ‹¼æŽ¥æˆä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨æ—¶ä¼ å…¥å‚æ•°ï¼Œä¼šç»è¿‡å¤šä¸ªå‡½æ•°
```js
const fn1 = ()=>{}
const fn2 = ()=>{}
const fn3 = ()=>{}

const fn = compose(fn1,fn2,fn3)
fn(params)
```
ðŸ‘† å‡½æ•°ç»„åˆï¼Œå…¶å®žç¼–å†™çš„ä»£ç ä¸ŠåŒºåˆ«ä¸å¤§ã€‚ã€‚ã€‚ä½†æ˜¯ç¡®å®žçœäº†å¾ˆå¤šè‡ªå·±å†™å¤„ç†å‡½æ•°çš„ç¹ç

### å®žçŽ°ç»„åˆå·¥å…·æ–¹æ³•compose(æŠŠå€¼ä¼ é€’éåŽ†æ‰§è¡Œæ€è·¯)

å®žé™…ä¸Šï¼Œå½“æˆ‘ä»¬çœŸæ­£çš„æŒ‰ç…§å‡½æ•°å¼ç¼–ç¨‹çš„æ€ç»´ï¼Œå†™ç€ä¸€ä¸ªä¸€ä¸ªçš„åŽŸå­å‡½æ•°ï¼Œæƒ³è¦è°ƒç”¨çš„æ—¶å€™å¾€å¾€ä¼šå‡ºçŽ°è¿™æ ·çš„å†™æ³•
```js
function fn() {
  return 'fn1'
}
function deal(info) {
  return info
}

// æŠŠinfoæ•°æ®å¤„ç†ä¸€æ¬¡åŽï¼Œä¼ ç»™fn
const res = fn(deal(info))
```

```js
// ç»„åˆå¤šä¸ªå‡½æ•° compose
function compose(...fns){
  return (value) => {
    // å€’åºæ‰§è¡Œ
    return fns.reverse().reduce((lastRes, fn) => fn(lastRes), value);
  }
}

const composefn = compose(fn1, fn2);
composefn('I am value');
```
