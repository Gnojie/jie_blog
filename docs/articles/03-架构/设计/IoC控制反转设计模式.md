
## æ¦‚å¿µ
æ§åˆ¶åè½¬/ä¾èµ–æ³¨å…¥
æ’ä»¶ç³»ç»Ÿå¸¸è§è®¾è®¡æ¨¡å¼ï¼Œå¸¸ç”¨äºé¢å‘å¯¹è±¡ç¼–ç¨‹

æ¦‚å¿µä¸Š(é¢å‘å¯¹è±¡)
- æ¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡éƒ½æ˜¯ä¾èµ–
- ä¸è¦è®©å®ä¾‹å†…éƒ¨å®ä¾‹åŒ–æ‰€ä¾èµ–çš„åˆ«çš„å®ä¾‹
- ä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€çš„æ§åˆ¶ä¸­å¿ƒæ¥å®ä¾‹åŒ–ä¾èµ–

## classç±»å®ç°

ä¸»ä½“å®ä¾‹å†…éƒ¨åˆ›å»ºä¸€ä¸ªæ§åˆ¶ä¸­å¿ƒï¼Œé€šè¿‡æ§åˆ¶ä¸­å¿ƒå¤„ç†ä¾èµ–åˆ°çš„æ¨¡å—
```js
export default class App {
  static modules = [] // moduleçº¦å®šä¸ºä¸€ä¸ªå«æœ‰initå‡½æ•°çš„å¯¹è±¡
  constructor() {
    this.init();
  }
  static use(module) {
    App.modules.push(module);
  }
  init() {
    App.modules.map(module => module.init(this));
  }
}
```

```js
export default { 
  init(app) {
    app.a = 'a'
  }
}
```

å®ä¾‹åŒ–ä¸»ä½“å®ä¾‹æ—¶ï¼Œç¼–å†™ç›¸å…³ä¾èµ–
```js
import a from './a.js'
import App from './app.js'

App.use(a)

const app = new App()
console.log(app)
```
ğŸ‘† è¿™æ ·å¯ä»¥å®ç°ï¼Œæ‹“å±•ä¾èµ–æˆ–è€…ä¿®æ”¹å·²æœ‰ä¾èµ–ï¼Œéœ€è¦é…åˆä¿®æ”¹çš„åªæœ‰å®ä¾‹åŒ–ä¸»ä½“å®ä¾‹çš„åœ°æ–¹ `index.js`ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ä¸»ä½“å®ä¾‹çš„å†…éƒ¨é€»è¾‘
![](https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20230101112651.png)


å¯ä»¥å‘ç°å¾ˆåƒvueçš„æ’ä»¶æœºåˆ¶
ä¹Ÿåƒkoa/expressçš„ä¸­é—´ä»¶æœºåˆ¶

## å‡½æ•°å¼ç¼–ç¨‹å®ç°

å‡½æ•°å¼ç¼–ç¨‹çš„å®—æ—¨æ˜¯æ²¡æœ‰ä¾èµ–ï¼Œå› æ­¤ä¸å­˜åœ¨ä¾èµ–æ³¨å…¥è¿™ç§åšæ³•

ä½†æ˜¯åœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œä½¿ç”¨è¿™ç§æ§åˆ¶ä¸­å¿ƒçš„æ€ç»´è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„

```js
export function createApp() {
  const modules = [] // moduleçº¦å®šä¸ºä¸€ä¸ªå«æœ‰initå‡½æ•°çš„å¯¹è±¡

  const use = (module)=>{
    modules.push(module)
  }
  const run = ()=>{
    modules.map(module => module.init(app));
  }
  
  const app = {
    use,
    run
  }

  return app
}
```

![](https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20230101114426.png)



## viteçš„æ’ä»¶æœºåˆ¶


## æ€»ç»“

ç”¨æˆ·ä¸éœ€è¦å…³å¿ƒç”Ÿå‘½å‘¨æœŸå’Œæµç¨‹ï¼Œåªç”¨å†™è‡ªå·±çš„æ¨¡å—ï¼Œå…³å¿ƒè‡ªå·±çš„ä¸šåŠ¡ï¼Œç”¨å®¹å™¨æ¥ç®¡ç†åº”ç”¨çš„æ•´ä½“ï¼Œåœ¨æŠ½è±¡ï¼Œè¿˜å¯ä»¥å†…ç½®å‡ å¤§æ¨¡å—çš„åŸºç±»ï¼Œæä¾›é’©å­ç»™ç”¨æˆ·ç»§æ‰¿å®ç°ä¸šåŠ¡