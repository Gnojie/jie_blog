编写异步函数的写法演进

## 背景

> 因为 javescript 创建之初，只是为了运行在浏览器端
> 面对浏览器特有的操作DOM场景，不能因为各种并发多线程逻辑，导致DOM被操作得晕头转向
> 因此 javascript 设计为单线程语言 - 负责执行代码的只有一个线程

而我们现在编写的异步函数，是基于单线程的事件循环机制进行的逻辑顺序排队(阻塞)执行，形成一种延迟执行的效果

## 同步代码的逻辑顺序

![](https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/webcomponents.gif)

## 异步
js(执行代码)是单线程的，浏览器并不是单线程的，js执行一些 webApi ，交给浏览器，浏览器可以开启别的线程
如 setTimeout 的 webApi 浏览器是在别的线程里倒计时

![](https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/webcomponents1.gif)


## 事件循环机制

### 宏任务

### 微任务

## 异步逻辑写法-回调函数

参考 《你不知道的js 中》

回调函数的问题，以及一一解决的办法


## 异步逻辑写法-prmose