> 2022å¹´6æœˆ6æ—¥ï¼Œ`IETF QUIC` å’Œ `HTTP` å·¥ä½œç»„æˆå‘˜ `Robin Marx` å®£å¸ƒï¼Œç»è¿‡ 5 å¹´çš„åŠªåŠ›ï¼ŒHTTP/3 è¢«æ ‡å‡†åŒ–ä¸º RFC 9114ï¼Œè¿™æ˜¯ HTTP è¶…æ–‡æœ¬ä¼ è¾“åè®®çš„ç¬¬ä¸‰ä¸ªä¸»è¦ç‰ˆæœ¬ã€‚åŒæ—¶ï¼ŒHTTP/2 ä¹Ÿæ›´æ–°ä¸º RFC 9113æ ‡å‡†ï¼ŒHTTP/1.1 å’Œé€šç”¨ HTTP è¯­ä¹‰å’Œç¼“å­˜æ¦‚å¿µåœ¨ RFC 9110-9112 ä¸­ä¹Ÿå¾—åˆ°äº†åŠ å¼ºã€‚

## httpåè®®çš„ç»ˆæé—®é¢˜
æˆ‘ä»¬çŸ¥é“httpåè®®çš„2ä¸ªç‰¹æ€§ï¼Œå°±æ˜¯å¯¼è‡´åç»­æˆ‘ä»¬å„ç§ä¼˜åŒ–å’Œæ”¹åŠ¨çš„ä¸»è¦åŸå› 
- æ— è¿æ¥(æ¯è¿›è¡Œä¸€æ¬¡HTTPé€šä¿¡ï¼Œéƒ½è¦æ–­å¼€ä¸€æ¬¡TCPè¿æ¥)
- æ— çŠ¶æ€

ä¸ºäº†è§£å†³TCPçš„å¤šæ¬¡è¿æ¥é—®é¢˜ï¼ŒHTTP/1.1æå‡ºäº†æŒä¹…è¿æ¥çš„æ–¹æ³•
ä¸ºäº†è§£å†³æ— çŠ¶æ€å¯¼è‡´çš„å†—ä½™é‡å¤å†…å®¹ä¼ è¾“ï¼Œæå‡ºçš„å¼º/åå•†ç¼“å­˜ç­–ç•¥ã€cookie

å¯ä»¥çœ‹å‡ºhttpåè®®ä½œä¸ºç½‘ç»œä¼ è¾“çš„é€šé“ï¼Œç»ˆæé—®é¢˜éƒ½æ˜¯æ›´å¿«çš„è¯·æ±‚å’Œå“åº”

![HTTP/2åè®®åˆ†å±‚](https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20220702203235.png)

ğŸ‘† httpåè®®çš„åˆ†å±‚ï¼Œåˆ†å±‚çš„æ¦‚å¿µä¼šå¦å¤–è®²è§£TODO:
åŸºç¡€åˆ†å±‚ä¸º
- ç‰©ç†å±‚
- IPå±‚
- TCPå±‚
- HTTPå±‚

## æ¦‚è¿°HTTP/2
> åœ¨å¼€å§‹HTTP/3ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•æ€»ç»“ä¸€ä¸‹HTTP/2å¸¦æ¥çš„æå‡å’Œæ²¡èƒ½è§£å†³çš„é—®é¢˜

ä»ğŸ‘†ã€httpåè®®çš„ç»ˆæé—®é¢˜ã€‘çš„åˆ†å±‚å›¾ï¼Œå¯ä»¥çœ‹å‡ºHTTP/2 åœ¨HTTP/1.1 çš„åŸºç¡€ä¸Šï¼Œåªæ˜¯å¤šäº†ä¸€å±‚ `Stream` å’Œ `HPack` å±‚ï¼Œç”¨äºå®ç°æ•°æ®ç”¨æµçš„å½¢å¼ä¼ è¾“è€Œä¸æ˜¯HTTP/1.1çš„å­—ç¬¦æ•°æ®ä¼ è¾“

- å¤šè·¯å¤ç”¨
  - åŸºäºstreamæµåˆ†å¸§ï¼Œå®ç°åªå»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼Œå¹¶ä¸”å¹¶å‘è¯·æ±‚ä¼ è¾“ä¸ç”¨æ’é˜ŸæŒ‰é¡ºåºè¿”å›
- å¤´éƒ¨å‹ç¼©
  - åŸºäºHpackç®—æ³•ï¼Œç±»ä¼¼å­—å…¸çŸ­å­—ç¬¦å®ç°å¤´éƒ¨å­—æ®µå‹ç¼©

HTTP/2è¿˜æ˜¯æ²¿ç”¨HTTP/1.1çš„åŸºåº§ï¼Œå±äºæ‹“å±•å¼çš„ä¼˜åŒ–

æ‰€ä»¥ä¼˜åŒ–æœªèƒ½è§£å†³çš„é—®é¢˜ï¼Œä¹Ÿæ­£æ˜¯æ•´ä¸ªHTTPçš„åŸºåº§çš„é—®é¢˜â€” â€”TCPåè®®

- ä¸¢åŒ…(å¼±ç½‘)åœºæ™¯ï¼Œå•ä¸ªTCPè¿æ¥ä¼šæ€æ ·ï¼Ÿ
- å³ä½¿åªæœ‰å•ä¸ªTCPè¿æ¥ï¼Œä¸€æ¬¡è¿æ¥æ¶ˆè€—çš„è¯·æ±‚å“åº”æ¥å›æœ‰4æ¬¡(æ…¢å¯åŠ¨)

## ä¸ä½¿ç”¨TCPåè®®ï¼Ÿ
> åœ¨æˆ‘ä»¬ä»¥å¾€çš„å­¦ä¹ çŸ¥è¯†é‡Œï¼Œå› ä¸ºIPå±‚ä¸å¯é è€Œéœ€è¦å¯é çš„TCPå±‚ï¼Œé‚£æˆ‘ä»¬å…¶å®å¯ä»¥ä¸ä½¿ç”¨TCPå±‚åšç½‘ç»œä¼ è¾“å—ï¼Ÿ

### TCPå±‚çš„ä½œç”¨
> TCP åè®®1.ä¸ºäº†æ›´å®¹æ˜“ä¼ é€å¤§æ•°æ®ä¼šæ•°æ®åˆ†å‰²ï¼›2.ä¸‰æ¬¡æ¡æ‰‹ï¼ˆthree-way handshakingï¼‰ç­–ç•¥èƒ½å¤Ÿç¡®è®¤æ•°æ®æœ€ç»ˆæ˜¯å¦é€è¾¾åˆ°å¯¹æ–¹ã€‚

![](https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20220703133834.png)

![](https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20220703133639.png)

## æ›¿ä»£TCPå±‚çš„QUICåè®®

