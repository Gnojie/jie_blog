
ç¯å¢ƒä¿¡æ¯
- vite
- vue3(setup script)
- typescript -æ ‡é…
- vue-router -vue3ç”Ÿæ€
- eslint -ä»£ç (jsã€vue)æ ¼å¼åŒ–
- stylelint -ä»£ç (css)æ ¼å¼åŒ–
- tailwind-css -åŸå­cssæ ·å¼åº“ 
- element-plus -vue3ç»„ä»¶åº“


## è„šæ‰‹æ¶ç”Ÿæˆåˆå§‹åŒ–é¡¹ç›®

vue3å®˜æ–¹è„šæ‰‹æ¶ç”Ÿæˆé¡¹ç›®
ğŸ‘‡ [vue3å®˜æ–¹æ–‡æ¡£](https://vuejs.org/guide/quick-start.html#creating-a-vue-application)
```bash
npm init vue@latest
```

ğŸ‘‡ [create-vueå®˜æ–¹æŒ‡ä»¤](https://github.com/vuejs/create-vue)
```bash
npm create vue@latest
```

---

### ğŸ¤” ä¸ºä»€ä¹ˆæœ‰ä¸åŒçš„å‘½ä»¤æ¥åˆå§‹åŒ–é¡¹ç›®

2ä¸ªæŒ‡ä»¤å¯ä»¥çœ‹å‡ºåŒºåˆ«æ˜¯ `init/create`
æˆ‘ä»¬è¿è¡Œ
```bash
npm create --help
```
ğŸ‘‡ å¾—åˆ°
```bash
Usage:
npm init <package-spec> (same as `npx <package-spec>)
npm init <@scope> (same as `npx <@scope>/create`)

Options:
[-y|--yes] [-f|--force] [--scope <@scope>]
[-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]
[-ws|--workspaces] [--no-workspaces-update] [--include-workspace-root]

aliases: create, innit

Run "npm help init" for more info
```
ğŸ‘† çœ‹å‡º `create` æ˜¯ `init` çš„åˆ«åï¼Œå¹¶ä¸”æŒ‡å¼•è¯¦æƒ…æ–‡æ¡£ä¹Ÿæ˜¯æ‰“å¼€ `init`

å› æ­¤ è¿™é‡Œè¿è¡Œ `npm init vue@latest` === `npm create vue@latest`

---

ğŸ‘‡ [npm init å®˜æ–¹æ–‡æ¡£](https://docs.npmjs.com/cli/v8/commands/npm-init)
```bash
npm init foo -> npm exec create-foo
npm init @usr/foo -> npm exec @usr/create-foo
npm init @usr -> npm exec @usr/create
npm init @usr@2.0.0 -> npm exec @usr/create@2.0.0
npm init @usr/foo@2.0.0 -> npm exec @usr/create-foo@2.0.0
```

å› æ­¤ `npm init vue@latest` ç­‰åŒäºğŸ‘‡
```bash
npx create-vue@latest
```

æŒ‡ä»¤ [create-vueå®˜æ–¹æŒ‡ä»¤](https://github.com/vuejs/create-vue)å°†ä¼šå¾—åˆ°ğŸ‘‡å‘½ä»¤è¡Œé—®ç­”

```bash
âœ” Project name: â€¦ <your-project-name>
âœ” Add TypeScript? â€¦ No / Yes
âœ” Add JSX Support? â€¦ No / Yes
âœ” Add Vue Router for Single Page Application development? â€¦ No / Yes
âœ” Add Pinia for state management? â€¦ No / Yes
âœ” Add Vitest for Unit testing? â€¦ No / Yes
âœ” Add Cypress for both Unit and End-to-End testing? â€¦ No / Yes
âœ” Add ESLint for code quality? â€¦ No / Yes
âœ” Add Prettier for code formatting? â€¦ No / Yes

Scaffolding project in ./<your-project-name>...
Done.
```

ğŸ‘‡ å¦å¤–åœ¨[viteå®˜æ–¹æ–‡æ¡£](https://cn.vitejs.dev/guide/#scaffolding-your-first-vite-project) åˆ›å»ºvueé¡¹ç›®æŒ‡ä»¤
```bash
npm create vite <your-project-name> --template vue
```
åŒç†ç­‰åŒäº `npx create-vite` - [create-vite github](https://github.com/vitejs/vite/tree/main/packages/create-vite)

### è„šæ‰‹æ¶é¡¹ç›®å·²æœ‰é…ç½®

> åˆ é™¤å†—ä½™ä»£ç åçš„å·²æœ‰é…ç½®

```text
.vscode -vscodeç¼–è¾‘å™¨å±€éƒ¨é…ç½®
public -ä¸å‚ä¸ç¼–è¯‘çš„ç›®å½•èµ„æº(å›¾ç‰‡ã€csså˜é‡ç­‰)
src -é¡¹ç›®ç›®å½•å’Œvue2åŸºæœ¬ä¸€è‡´
.eslint -eslinté…ç½®
.gitignore -gitå¿½ç•¥é…ç½®
env.d.ts -tsé…ç½®(https://cn.vitejs.dev/guide/features.html#typescript)
index.html -æ¨¡æ¿html
package.json
tsconfig.config.json -tsé…ç½®
tsconfig.json -tsé…ç½®
vite.config.ts -viteé…ç½®
```

### viteé…ç½®

ğŸ‘‡ `vite.config.ts`æ–‡ä»¶
```ts
import { fileURLToPath, URL } from 'node:url' // ç”¨äºé…ç½®ç›®å½•åˆ«å

import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    }
  }
})
```
ğŸ‘† åªé…ç½®äº†
- ä¸€ä¸ª`vue3`çš„`plugin`
  - `@vitejs/plugin-vue`
  - Official plugin that provides Vue SFC support in Vite.
  - ç­‰åŒäºvue2çš„`loader`(è½¬è¯‘`.vueæ–‡ä»¶`)å’Œ`plugin`
- åˆ«å `alias`
  - [node:urlå®˜æ–¹æ–‡æ¡£](https://nodejs.org/api/url.html#urlfileurltopathurl)
  - `fileURLToPath(new URL('./src', import.meta.url))`
  - ç­‰åŒäºä»¥å‰åœ¨webpacké‡Œä½¿ç”¨çš„è‡ªå·±å°è£…çš„`path.resolve`å‡½æ•°
  - `path.resolve(__dirname, 'src')`
  - TODO:åŒºåˆ«ï¼Ÿ

### tsé…ç½®
ğŸ‘‡ `tsconfig.json`

```json
{
  "extends": "@vue/tsconfig/tsconfig.web.json",
  "include": ["env.d.ts", "src/**/*", "src/**/*.vue"],
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },

  "references": [
    {
      "path": "./tsconfig.config.json"
    }
  ]
}
```
TODO: tsé…ç½®å°†å•ç‹¬è®²è§£

### eslinté…ç½®
ğŸ‘‡ `.eslint.cjs`
```js
/* eslint-env node */
require('@rushstack/eslint-patch/modern-module-resolution')

module.exports = {
  root: true,
  'extends': [
    'plugin:vue/vue3-essential',
    'eslint:recommended',
    '@vue/eslint-config-typescript'
  ],
  parserOptions: {
    ecmaVersion: 'latest'
  }
}
```
ğŸ‘† ä½¿ç”¨çš„æ˜¯ `CommonJs`çš„`cjs`æ–‡ä»¶

é…ç½®äº†3ä¸ªé¢„è®¾
- `plugin:vue/vue3-essential`
  - `eslint` ä¼šæŠŠè¿™ç§å†™æ³•è§£æä¸ºå¯¹åº”çš„ä¾èµ–åŒ…åä¸éœ€è¦å¼•å…¥
  - `plugin:vue` -> `eslint-plugin-vue`
  - `essential` åŸºæœ¬çš„
- `eslint:recommended` å¯¹åº”ä¾èµ–åŒ… `eslint`
- `@vue/eslint-config-typescript`
  - æ²¡æœ‰é‡‡ç”¨ç‰¹æ®Šå†™æ³•ï¼Œå› æ­¤å°±æ˜¯å¯¹åº”çš„ä¾èµ–åŒ…
  - åŸºäº`@typescript-eslint/eslint-plugin`æ‰©å±•çš„vueçš„tsä»£ç æ ¼å¼æ ¡éªŒ

é…åˆ`@vue/eslint-config-typescript` ä»£ç æ ¼å¼åŒ–éœ€è¦å®‰è£… `@rushstack/eslint-patch/modern-module-resolution` TODO: 

### æ¨¡æ¿html

```html
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>innermanage demo</title>
</head>
```
ğŸ‘‡ ä½¿ç”¨çš„æ˜¯esm
```html
<body>
  <div id="app"></div>
  <script type="module" src="/src/main.ts"></script>
</body>
```

### routeré…ç½®
ğŸ‘‡ `router/index.ts`
```ts
import { createRouter, createWebHistory } from 'vue-router'

const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL), // TODO:
  routes: [
    {
      path: '/',
      name: 'home',
      redirect:'home'
    },
    {
      path: '/home',
      name: 'home',
      component: () => import('../views/home.vue')
    }
  ]
})
export default router
```

ğŸ‘‡ `main.ts`
```ts
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'

const app = createApp(App)
app.use(router)
app.mount('#app')
```

## viteç¯å¢ƒé…ç½®
vite é»˜è®¤è®¾ç½®ç¯å¢ƒå˜é‡`development` `productment`

### ç¯å¢ƒå˜é‡ç›®å½•ä¿®æ”¹

> Vite åœ¨ä¸€ä¸ªç‰¹æ®Šçš„ `import.meta.env` å¯¹è±¡ä¸Šæš´éœ²ç¯å¢ƒå˜é‡

[ç¯å¢ƒå˜é‡å’Œæ¨¡å¼-viteå®˜æ–¹æ–‡æ¡£](https://cn.vitejs.dev/guide/env-and-mode.html)

> ç¯å¢ƒå˜é‡æ–‡ä»¶ç›®å½•é»˜è®¤ä»é¡¹ç›®æ ¹è·¯å¾„è¯»å–
> é€šè¿‡ğŸ‘‡ é…ç½®ä¿®æ”¹
[envdiré…ç½®-viteå®˜æ–¹æ–‡æ¡£](https://cn.vitejs.dev/config/shared-options.html#envdir)

æ–°å»ºç›®å½• `build/env` å­˜æ”¾ç¯å¢ƒå˜é‡

ğŸ‘‡ `build/env/.env.development`
```bash
# import.meta.env.VITE_SOME_KEY
VITE_SOME_KEY=dev-VITE_SOME_KEY
```
ğŸ‘‡ `build/env/.env.production`
```bash
# import.meta.env.VITE_SOME_KEY
VITE_SOME_KEY=prod-VITE_SOME_KEY
```

ğŸ‘‡ ä¿®æ”¹`vite.config.ts`

```ts
export default defineConfig({
  plugins: [ ... ],
  resolve: { ... },
  // ä¿®æ”¹ç¯å¢ƒå˜é‡é…ç½®ç›®å½•(é»˜è®¤æ˜¯æ ¹ç›®å½•)
  envDir: fileURLToPath(new URL('./build/env'))
})
```

### viteæ‰“åŒ…é…ç½®æ ¹æ®ç¯å¢ƒåŒºåˆ†æ–‡ä»¶
> viteåªç»™ç¯å¢ƒå˜é‡é»˜è®¤è®¾ç½® dotenv ç›®å½•è¯»å–é…ç½®
> å…¶ä»–æ‰“åŒ…é…ç½®å¹¶æ²¡æœ‰åŒºåˆ†ç¯å¢ƒ
> å› æ­¤æˆ‘ä»¬ä½¿ç”¨å‡½æ•°æ‰‹åŠ¨åˆ†å¼€ä½¿ç”¨å¯¹åº”ç¯å¢ƒçš„é…ç½®æ–‡ä»¶

ğŸ‘‡ `build/index.ts`
```ts
import { devConfig } from './config/dev.config';
import { prodConfig } from './config/prod.config';

// æŠŠé…ç½®åŒ…è£…æˆå‡½æ•°ï¼Œåœ¨è¿è¡Œæ‰“åŒ…æŒ‡ä»¤æ—¶ï¼Œæ‡’åŠ è½½å‡½æ•°ï¼Œä¸ç”¨é¢„ç¼–è¯‘æ‰€æœ‰é…ç½®æ–‡ä»¶
export const envResolver = new Map<string,()=>void>([
  ['development', ()=>devConfig], // keyä¸ºviteæ‰“åŒ…æŒ‡ä»¤çš„modeç¯å¢ƒå˜é‡,é»˜è®¤æœ‰developmentã€production(https://cn.vitejs.dev/config/shared-options.html#mode)
  ['production', ()=>prodConfig]
])
```
ğŸ‘† æŠ›å‡ºä¸€ä¸ªmapå¯¹è±¡
- keyä¸ºæ‰“åŒ…æŒ‡ä»¤çš„ç¯å¢ƒå˜é‡
- valueä¸ºä¸€ä¸ªå‡½æ•°ç›´æ¥æŠ›å‡ºå¯¹åº”ç¯å¢ƒé…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œå®ç°æ‡’åŠ è½½

ğŸ‘‡ `build/config/*.config.ts`
```ts
// build/config/dev.config.ts
export const devConfig = {}

// build/config/prod.config.ts
export const prodConfig = {}
```
ğŸ‘† ç›´æ¥æŠ›å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œä¼šç”±index.tsåŒ…è£…æˆå‡½æ•°å®ç°æ‡’åŠ è½½

ğŸ‘‡ vite.config.ts
```ts
import { envResolver } from "./build/index";

// ä¸åŒæ‰“åŒ…ç¯å¢ƒ é€šç”¨é…ç½®
const commonConfig = {
  plugins: [ ... ],
  resolve: { ... },
  envDir: ...
}

// æ‰“åŒ…é…ç½®å‡½æ•°ï¼Œæ”¹ç”¨å‡½æ•°å¯ä»¥è·å–åˆ°æ‰“åŒ…ç¯å¢ƒå˜é‡mode
// TODO: æ€ä¹ˆå®šä¹‰è¿™ä¸ªé…ç½®å‡½æ•°çš„å‚æ•°ç±»å‹æ¨å¯¼
const modeConfigFn = ({ mode }:{mode:string}) => {
  const fn = envResolver.get(mode) || (()=>{})
  return Object.assign(
    commonConfig,
    fn()
  )
}
export default defineConfig(modeConfigFn)
```
ğŸ‘† å¼•ç”¨`import { envResolver } from "./build/index"`ä¼šæœ‰tsæŠ¥é”™ï¼Œæ‰¾ä¸åˆ°å¯¹åº”æ¨¡å—çš„ç±»å‹å£°æ˜
æ˜¯å› ä¸ºé¡¹ç›®çš„tsé…ç½®äº†ç¼–è¯‘ç›®å½•
ğŸ‘‡ åœ¨ `tsconfig.config.json` ä¸­æ·»åŠ  `"build/**/*.ts`

`"include": ["vite.config.*", "vitest.config.*", "cypress.config.*", "playwright.config.*", "build/**/*.ts"],`