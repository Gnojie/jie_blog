
[Web Components - MDN](https://developer.mozilla.org/zh-CN/docs/Web/Web_Components)

## æ¡†æ¶ç»„ä»¶ä¸åŸç”Ÿç»„ä»¶Web Components

ä¸ä½¿ç”¨å‰ç«¯æ¡†æ¶ï¼Œæˆ‘ä»¬éœ€è¦é¢ä¸´ç¼ºå°‘
- è‰¯å¥½çš„ç”Ÿæ€
- æ•°æ®é©±åŠ¨è§†å›¾
- æ¨¡å—åŒ–
- ç»„ä»¶åŒ–
- ç­‰ç­‰çš„é—®é¢˜

ä½†æ˜¯å®˜æ–¹ç°åœ¨å…¶å®å·²ç»æ”¯æŒåŸç”Ÿçš„æ¨¡å—åŒ–äº† `ES Module`
è€Œç»„ä»¶åŒ–ï¼Œå®˜æ–¹ä¹Ÿæ¨å‡ºäº† `Web Components`

æˆ‘ä»¬å†æ¥çœ‹çœ‹æ¡†æ¶é‡Œçš„ç»„ä»¶åŒ–
å¦‚ `vue` æ”¯æŒæˆ‘ä»¬å¼€å‘è¿‡ç¨‹ç¼–å†™ `<my-button>` çš„æ ‡ç­¾ï¼Œå¯¹åº”è¿™ä¸€ä¸ªUIç»„ä»¶
ä½†æ˜¯åœ¨è¿è¡Œæ—¶è¿™ä¸ª `<my-button>` æ˜¯æ‰“åŒ…åè¢«ç¼–è¯‘æˆæ™®é€šçš„ `<div>` æ ‡ç­¾æ¥æ¸²æŸ“çš„

è€ŒåŸç”Ÿçš„ `Web Components` åˆ™æ˜¯æµè§ˆå™¨åœ¨è¿è¡Œæ—¶çœŸæ­£ä»¥è‡ªå®šä¹‰æ ‡ç­¾çš„ `<my-button>` æ¥è¿›è¡Œæ¸²æŸ“çš„

---

> æ€è€ƒ1ğŸ¤”ï¼š
> 
> æ¡†æ¶ä¸­çš„ç»„ä»¶è¢«ç¼–è¯‘æˆdivè®©æµè§ˆå™¨è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ç±»æ¯”å…¶ä»–çš„åœºæ™¯
>
> å¦‚ï¼š *cssé¢„å¤„ç†å™¨* (`scss`ã€`less`)ï¼Œé‡Œçš„å˜é‡çš„æ¦‚å¿µï¼Œæ˜¯é€šè¿‡ç¼–è¯‘æ—¶æŠŠçœŸå®å˜é‡å€¼æ›¿æ¢åˆ°å˜é‡å¼•ç”¨çš„åœ°æ–¹ï¼Œåˆ°æµè§ˆå™¨è¿è¡Œæ—¶æ˜¯çœŸæ­£çš„å€¼è€Œä¸æ˜¯å˜é‡
> è€ŒcssåŸç”Ÿåæ¥æ¨å‡ºçš„å˜é‡æ‰æ˜¯æµè§ˆå™¨è¿è¡Œæ—¶çœŸæ­£çš„å˜é‡

> `cssé¢„å¤„ç†å™¨å˜é‡`ä¸`åŸç”Ÿcsså˜é‡`çš„åŒºåˆ«:
> - `scss`ç­‰é¢„å¤„ç†å™¨çš„å˜é‡é€šè¿‡ç¼–è¯‘å®ç°çš„åŸç†ï¼Œå¯¼è‡´æˆ‘ä»¬å¹¶ä¸èƒ½åœ¨è¿è¡Œæ—¶æµè§ˆå™¨jsä¸­æ“ä½œ `scss` çš„å˜é‡
> - ç¼–è¯‘åçš„scsså˜é‡å°±ä¸å†æ˜¯å˜é‡äº†
> - è€ŒåŸç”Ÿcsså˜é‡ï¼Œå¯ä»¥è¢«æµè§ˆå™¨è¿è¡Œæ—¶çš„jsæ“ä½œï¼Œå¹¶ä¸”å¼•ç”¨çš„åœ°æ–¹å°±èƒ½æ›´æ–°å˜é‡å€¼

---

> æ€è€ƒ2ğŸ¤”ï¼š
> åŸç”Ÿå¸æ”¶æ¡†æ¶çš„è®¾è®¡æ˜¯å¾ˆå¸¸è§çš„æƒ…å†µ
> å¦‚ `jQuery` çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€å¿«æ·é€‰æ‹©domçš„ `$()`ï¼Œè¢«å®˜æ–¹çš„`querySelector()`å’Œ`querySelectorAll()`æ‰€æ›¿ä»£

> `vue` å’Œ `react` ï¼Œç›®å‰å®˜æ–¹æ–‡æ¡£ä¸­éƒ½æœ‰ä½¿ç”¨ `Web Components` çš„ä»‹ç»
> æ¯•ç«Ÿæ¡†æ¶æä¾›çš„`æ•°æ®é©±åŠ¨è§†å›¾`å’Œ`ç»„ä»¶é€šä¿¡`å’Œ`å¤æ‚é€»è¾‘`å’Œ`å¤ç”¨`ï¼Œç”¨æ¥å¼€å‘ç»„ä»¶æ‰æ˜¯æ›´æ–¹ä¾¿çš„ï¼Œæ‰€ä»¥åªç”¨ `Web Components` æ¥ä¸€æŠŠæ¢­å“ˆï¼Œè¿˜æ˜¯ä¸æ–¹ä¾¿
> ç›¸åï¼Œé…åˆç€æ¡†æ¶ä½¿ç”¨è¾¾åˆ°äº’è¡¥çš„æ•ˆæœæ‰æ˜¯ç›®å‰æœ€é¦™çš„

---

## web Componentsä¼˜ç‚¹

è€ŒåŸç”Ÿç»„ä»¶åŒ–æœ€å¤§çš„å¥½å¤„åœ¨äºå®ƒæ˜¯è„±ç¦»æ¡†æ¶çš„ï¼Œå³åŸç”Ÿç»„ä»¶å³å¯åœ¨ `vue` ä¸­ä½¿ç”¨ä¹Ÿå¯ä»¥åœ¨ `react` ä¸­ä½¿ç”¨

[web components å®Œæ•´ä¼˜ç‚¹ -é˜¿é‡Œå·´å·´å¤§æ·˜å®æŠ€æœ¯](https://zhuanlan.zhihu.com/p/475779606)

ä»ä½œç”¨ä¸Šçœ‹ï¼Œæ˜¯ç»„ä»¶

ä»ç‰¹æ€§ä¸Šçœ‹ï¼Œåƒiframe

## Web Components ç¤ºä¾‹

```html
<html>
  <head>
    <meta charset="utf-8">
    <title>demo</title>
    <script src="main.js" defer></script>
  </head>
  <body>
    <open-shadow text="I have an open shadow root"></open-shadow>
  </body>
</html>
```

```js
customElements.define('open-shadow',
  class extends HTMLElement {
    constructor() {
      super();

      const pElem = document.createElement('p');
      pElem.textContent = this.getAttribute('text');

      const shadowRoot = this.attachShadow({mode: 'open'});
      shadowRoot.appendChild(pElem);
    }
  }
);
```

é™¤äº†ç”¨jsæ¥åˆ›å»º `Web Components`ï¼Œè¿˜å¯ä»¥ç”¨`html`æ¥åˆ›å»ºï¼Œè¿™æ ·çš„å†™æ³•ä¼šè·Ÿ `vue` çš„ [SFC](https://vuejs.org/api/sfc-spec.html) æ–‡ä»¶éå¸¸ç›¸åƒ
å¦‚ğŸ‘‡
```html
<html>
  <head>
    <meta charset="utf-8">
    <title>demo</title>
    <link rel="import" href="test.html">
  </head>
  <body>
    <my-p>123</my-p>
  </body>
</html>
```

```html
<template>
  <p>
    <slot></slot>
  </p>
</template>

<script>
const dom = document.currentScript.ownerDocument.querySelector('template').content

customElements.define('my-p', class extends HTMLElement {
  constructor() {
    super()

    this.attachShadow({ mode:'open' }).appendChild(dom)
  }
})
</script>

<style>
p{
  color: red;
}
</style>
```
ğŸ‘† å¯ä»¥çœ‹åˆ°è¿™ä¸ªhtmlæ–‡ä»¶å’Œvue2çš„å†™æ³•å¾ˆåƒï¼Œä½†æ˜¯styleæ ‡ç­¾æ²¡æœ‰ç”Ÿæ•ˆ(FIXME: )ï¼Œå¯èƒ½åºŸå¼ƒäº†ï¼Ÿ

è¿™é‡Œçš„  `Web Components` å¹¶ä¸æ˜¯ä¸€ç§**å•ä¸€çš„æŠ€æœ¯**ï¼Œè€Œæ˜¯**4ç§æŠ€æœ¯**
- `HTML Imports` (è°·æ­Œ79ä»¥ä¸ŠåºŸå¼ƒ)
- `HTML templates`
- `Custom Elements`
- `Shadow DOM`

## HTML Imports(è°·æ­Œ79ä»¥ä¸ŠåºŸå¼ƒ)

`<link rel="import" href="xxx.html">` å…¶å®æ˜¯ä¸€ç§htmlçš„æ¨¡å—åŒ–
